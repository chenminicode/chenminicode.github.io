<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Blog</title>
<link>https://chenminicode.github.io/index.html</link>
<atom:link href="https://chenminicode.github.io/index.xml" rel="self" type="application/rss+xml"/>
<description>metseq's blog</description>
<generator>quarto-1.1.251</generator>
<lastBuildDate>Tue, 08 Nov 2022 16:00:00 GMT</lastBuildDate>
<item>
  <title>Pythonä¸­çš„__getattr__å’Œ__getattribute__</title>
  <dc:creator>metseq</dc:creator>
  <link>https://chenminicode.github.io/posts/2022-11-09-python_getattr_getattribute/index.html</link>
  <description><![CDATA[ 




<section id="getattr__" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> <code>__getattr__</code></h1>
<p>å¦‚æœå†ç±»ä¸­å®ç°äº†<code>_getattr__</code>æ–¹æ³•ï¼Œé‚£ä¹ˆå½“ä½¿ç”¨<code>å¯¹è±¡.å±æ€§</code>çš„æ—¶å€™ï¼Œå¦‚æœ<code>å±æ€§</code>ä¸åœ¨å¯¹è±¡é‡Œï¼Œåˆ™ä¼šè°ƒç”¨<code>__getattr__</code>æ–¹æ³•ã€‚</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="kw" style="color: #003B4F;">class</span> Point():</span>
<span id="cb1-2">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, x, y):</span>
<span id="cb1-3">        <span class="va" style="color: #111111;">self</span>.x <span class="op" style="color: #5E5E5E;">=</span> x</span>
<span id="cb1-4">        <span class="va" style="color: #111111;">self</span>.y <span class="op" style="color: #5E5E5E;">=</span> y</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">p <span class="op" style="color: #5E5E5E;">=</span> Point(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">4</span>)</span>
<span id="cb2-2"><span class="bu" style="color: null;">print</span>(p.x, p.y)</span>
<span id="cb2-3"><span class="bu" style="color: null;">print</span>(p.z)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3 4</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>AttributeError: 'Point' object has no attribute 'z'</code></pre>
</div>
</div>
<p>å› ä¸º<code>Point</code>æ²¡æœ‰<code>z</code>è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªç±»å®ç°äº†<code>__getattr__</code>æ–¹æ³•ï¼Œçœ‹çœ‹ä¼šæ€ä¹ˆæ ·</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="kw" style="color: #003B4F;">class</span> Point():</span>
<span id="cb5-2">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, x, y):</span>
<span id="cb5-3">        <span class="va" style="color: #111111;">self</span>.x <span class="op" style="color: #5E5E5E;">=</span> x</span>
<span id="cb5-4">        <span class="va" style="color: #111111;">self</span>.y <span class="op" style="color: #5E5E5E;">=</span> y</span>
<span id="cb5-5">    </span>
<span id="cb5-6">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__getattr__</span>(<span class="va" style="color: #111111;">self</span>, name):</span>
<span id="cb5-7">        <span class="bu" style="color: null;">print</span>(<span class="st" style="color: #20794D;">'exec __getattr__ ğŸ˜€'</span>)</span>
<span id="cb5-8">        <span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f'name: </span><span class="sc" style="color: #5E5E5E;">{</span>name<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;">'</span>)</span>
<span id="cb5-9">        <span class="cf" style="color: #003B4F;">return</span> <span class="dv" style="color: #AD0000;">42</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">p <span class="op" style="color: #5E5E5E;">=</span> Point(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">4</span>)</span>
<span id="cb6-2">p.z</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>exec __getattr__ ğŸ˜€
name: z</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>42</code></pre>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>__getattr__</code>æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œselfä¸ç”¨è¯´ï¼Œnameå°±æ˜¯<code>å±æ€§</code>åç§°ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­å°±æ˜¯<code>z</code></p>
</div>
</div>
</section>
<section id="getattribute__" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> <code>__getattribute__</code></h1>
<p>å¦‚æœå†ç±»ä¸­å®ç°äº†<code>__getattribute__</code>æ–¹æ³•ï¼Œé‚£ä¹ˆå½“ä½¿ç”¨<code>å¯¹è±¡.å±æ€§</code>çš„æ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨<code>__getattr__</code>æ–¹æ³•ã€‚</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>æ³¨æ„<code>_getattr__</code>åªåœ¨å±æ€§ä¸åœ¨å¯¹è±¡é‡Œçš„æ—¶å€™åœ¨è°ƒç”¨</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="kw" style="color: #003B4F;">class</span> Point():</span>
<span id="cb9-2">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, x, y):</span>
<span id="cb9-3">        <span class="va" style="color: #111111;">self</span>.x <span class="op" style="color: #5E5E5E;">=</span> x</span>
<span id="cb9-4">        <span class="va" style="color: #111111;">self</span>.y <span class="op" style="color: #5E5E5E;">=</span> y</span>
<span id="cb9-5">    </span>
<span id="cb9-6">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__getattribute__</span>(<span class="va" style="color: #111111;">self</span>, name):</span>
<span id="cb9-7">        <span class="bu" style="color: null;">print</span>(<span class="st" style="color: #20794D;">'exec __getattr__ ğŸ˜€'</span>)</span>
<span id="cb9-8">        <span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f'name: </span><span class="sc" style="color: #5E5E5E;">{</span>name<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;">'</span>)</span>
<span id="cb9-9">        <span class="cf" style="color: #003B4F;">return</span> <span class="dv" style="color: #AD0000;">42</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">p <span class="op" style="color: #5E5E5E;">=</span> Point(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">4</span>)</span>
<span id="cb10-2">p.x, p.y, p.z</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>exec __getattr__ ğŸ˜€
name: x
exec __getattr__ ğŸ˜€
name: y
exec __getattr__ ğŸ˜€
name: z</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>(42, 42, 42)</code></pre>
</div>
</div>
<p><code>p.x</code>, <code>p.y</code>å’Œ<code>p.z</code>éƒ½è°ƒç”¨äº†<code>__getattribute__</code>æ–¹æ³•</p>


</section>

 ]]></description>
  <category>Python</category>
  <guid>https://chenminicode.github.io/posts/2022-11-09-python_getattr_getattribute/index.html</guid>
  <pubDate>Tue, 08 Nov 2022 16:00:00 GMT</pubDate>
</item>
<item>
  <title>Pythonä¸­çš„__enter__å’Œ__exit__</title>
  <dc:creator>metseq</dc:creator>
  <link>https://chenminicode.github.io/posts/2022-11-08-python_enter_exit/index.html</link>
  <description><![CDATA[ 




<section id="enter__å’Œ__exit__æ˜¯ä»€ä¹ˆ" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> <code>__enter__</code>å’Œ<code>__exit__</code>æ˜¯ä»€ä¹ˆ</h1>
<p>å½“åœ¨ç±»ä¸­å®ç°<code>__enter__</code>å’Œ<code>__exit__</code>æ–¹æ³•çš„ä½¿ç”¨ï¼Œè¿™ä¸ªç±»å°±å¯ä»¥ç”¨<code>with</code>è°ƒç”¨äº†ï¼Œè°ƒç”¨<code>with</code>çš„æ—¶å€™ï¼Œè¿”å›<code>__enter__</code>çš„ç»“æœï¼Œé€€å‡º<code>with</code>çš„æ—¶å€™ï¼Œæ‰§è¡Œ<code>__exit__</code>çš„ä»£ç ã€‚</p>
<p>å¹³æ—¶ç”¨<code>with</code>æœ€å¤šçš„å¯èƒ½æ˜¯æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œ<code>with</code>è¿”å›æ–‡ä»¶çš„å¥æŸ„ï¼ˆfile handleï¼‰ï¼Œé€€å‡º<code>with</code>çš„æ—¶å€™å…³é—­æ–‡ä»¶ã€‚</p>
<p>å¦‚ä¸‹ä»£ç ï¼š</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶</span></span>
<span id="cb1-2"><span class="op" style="color: #5E5E5E;">!</span> echo <span class="op" style="color: #5E5E5E;">-</span>e <span class="st" style="color: #20794D;">'line1</span><span class="ch" style="color: #20794D;">\n</span><span class="st" style="color: #20794D;">line2</span><span class="ch" style="color: #20794D;">\n</span><span class="st" style="color: #20794D;">line3'</span> <span class="op" style="color: #5E5E5E;">&gt;</span> sample.txt</span>
<span id="cb1-3"><span class="op" style="color: #5E5E5E;">!</span> cat sample.txt</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>line1
line2
line3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="co" style="color: #5E5E5E;"># ä½¿ç”¨pythonè¯»å–æ–‡ä»¶</span></span>
<span id="cb3-2"><span class="cf" style="color: #003B4F;">with</span> <span class="bu" style="color: null;">open</span>(<span class="st" style="color: #20794D;">'sample.txt'</span>, <span class="st" style="color: #20794D;">'r'</span>) <span class="im" style="color: #00769E;">as</span> f:</span>
<span id="cb3-3">    <span class="cf" style="color: #003B4F;">for</span> line <span class="kw" style="color: #003B4F;">in</span> f:</span>
<span id="cb3-4">        <span class="bu" style="color: null;">print</span>(line, end<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">''</span>)        </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>line1
line2
line3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;"># æŸ¥çœ‹fæ˜¯å¦å…³é—­äº†ï¼Œè¿”å›Trueï¼Œè¡¨ç¤ºfå…³é—­äº†</span></span>
<span id="cb5-2">f.closed</span></code></pre></div>
<div class="cell-output cell-output-display">
<pre><code>True</code></pre>
</div>
</div>
<p>å¦‚æœä¸ç”¨<code>with</code>ï¼Œéœ€è¦æ‰‹åŠ¨å…³é—­æ–‡ä»¶ã€‚</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">f <span class="op" style="color: #5E5E5E;">=</span> <span class="bu" style="color: null;">open</span>(<span class="st" style="color: #20794D;">'sample.txt'</span>, <span class="st" style="color: #20794D;">'r'</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;"># fè¿˜æ²¡æœ‰å…³é—­</span></span>
<span id="cb8-2">f.closed</span></code></pre></div>
<div class="cell-output cell-output-display">
<pre><code>False</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="co" style="color: #5E5E5E;"># ä½¿ç”¨close()æ–¹æ³•å…³é—­æ–‡ä»¶åï¼Œæ–‡ä»¶å°±å…³é—­äº†</span></span>
<span id="cb10-2">f.close()</span>
<span id="cb10-3">f.closed</span></code></pre></div>
<div class="cell-output cell-output-display">
<pre><code>True</code></pre>
</div>
</div>
</section>
<section id="è‡ªå·²å†™ä¸€ä¸ªå¤„ç†æ–‡ä»¶çš„ç±»" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> è‡ªå·²å†™ä¸€ä¸ªå¤„ç†æ–‡ä»¶çš„ç±»</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="kw" style="color: #003B4F;">class</span> MyOpen():</span>
<span id="cb12-2">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, <span class="bu" style="color: null;">file</span>, mode):</span>
<span id="cb12-3">        <span class="va" style="color: #111111;">self</span>.<span class="bu" style="color: null;">file</span> <span class="op" style="color: #5E5E5E;">=</span> <span class="bu" style="color: null;">file</span></span>
<span id="cb12-4">        <span class="va" style="color: #111111;">self</span>.mode <span class="op" style="color: #5E5E5E;">=</span> mode</span>
<span id="cb12-5">    </span>
<span id="cb12-6">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__enter__</span>(<span class="va" style="color: #111111;">self</span>):</span>
<span id="cb12-7">        <span class="va" style="color: #111111;">self</span>.f <span class="op" style="color: #5E5E5E;">=</span> <span class="bu" style="color: null;">open</span>(<span class="va" style="color: #111111;">self</span>.<span class="bu" style="color: null;">file</span>, <span class="va" style="color: #111111;">self</span>.mode)</span>
<span id="cb12-8">        <span class="cf" style="color: #003B4F;">return</span> <span class="va" style="color: #111111;">self</span>.f</span>
<span id="cb12-9">    </span>
<span id="cb12-10">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__exit__</span>(<span class="va" style="color: #111111;">self</span>, exc_type, exc_val, exc_tb):</span>
<span id="cb12-11">        <span class="va" style="color: #111111;">self</span>.f.close()</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="cf" style="color: #003B4F;">with</span> MyOpen(<span class="st" style="color: #20794D;">'sample.txt'</span>, <span class="st" style="color: #20794D;">'r'</span>) <span class="im" style="color: #00769E;">as</span> f:</span>
<span id="cb13-2">    <span class="cf" style="color: #003B4F;">for</span> line <span class="kw" style="color: #003B4F;">in</span> f:</span>
<span id="cb13-3">        <span class="bu" style="color: null;">print</span>(line, end<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">''</span>)        </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>line1
line2
line3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1">f.closed</span></code></pre></div>
<div class="cell-output cell-output-display">
<pre><code>True</code></pre>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>æ³¨æ„ä¸Šé¢çš„MyOpenç±»ä¸­çš„__exit__æ–¹æ³•æœ‰4ä¸ªå‚æ•°ï¼Œselfä¸å¿…è¯´ï¼Œåé¢ä¸‰ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
</div>
</div>
</section>
<section id="exit__çš„å‚æ•°" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> <code>__exit__</code>çš„å‚æ•°</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><span class="kw" style="color: #003B4F;">class</span> SafeDivide():</span>
<span id="cb17-2">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, a, b):</span>
<span id="cb17-3">        <span class="va" style="color: #111111;">self</span>.a <span class="op" style="color: #5E5E5E;">=</span> a</span>
<span id="cb17-4">        <span class="va" style="color: #111111;">self</span>.b <span class="op" style="color: #5E5E5E;">=</span> b</span>
<span id="cb17-5">    </span>
<span id="cb17-6">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__enter__</span>(<span class="va" style="color: #111111;">self</span>):</span>
<span id="cb17-7">        <span class="bu" style="color: null;">print</span>(<span class="st" style="color: #20794D;">'exec __enter__'</span>)</span>
<span id="cb17-8">        <span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f'</span><span class="sc" style="color: #5E5E5E;">{</span><span class="va" style="color: #111111;">self</span><span class="sc" style="color: #5E5E5E;">.</span>a<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;"> / </span><span class="sc" style="color: #5E5E5E;">{</span><span class="va" style="color: #111111;">self</span><span class="sc" style="color: #5E5E5E;">.</span>b<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;"> = '</span>, end<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">''</span>)</span>
<span id="cb17-9">        <span class="cf" style="color: #003B4F;">return</span> <span class="va" style="color: #111111;">self</span></span>
<span id="cb17-10">    </span>
<span id="cb17-11">    <span class="kw" style="color: #003B4F;">def</span> divide(<span class="va" style="color: #111111;">self</span>):</span>
<span id="cb17-12">        <span class="cf" style="color: #003B4F;">return</span> <span class="va" style="color: #111111;">self</span>.a <span class="op" style="color: #5E5E5E;">/</span> <span class="va" style="color: #111111;">self</span>.b</span>
<span id="cb17-13">    </span>
<span id="cb17-14">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__exit__</span>(<span class="va" style="color: #111111;">self</span>, exc_type, exc_val, exc_tb):</span>
<span id="cb17-15">        <span class="bu" style="color: null;">print</span>(<span class="st" style="color: #20794D;">'</span><span class="ch" style="color: #20794D;">\n</span><span class="st" style="color: #20794D;">------------'</span>)</span>
<span id="cb17-16">        <span class="bu" style="color: null;">print</span>(<span class="st" style="color: #20794D;">'exec __exit__'</span>)</span>
<span id="cb17-17">        <span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f"exec_type: </span><span class="sc" style="color: #5E5E5E;">{</span>exc_type<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;">"</span>)</span>
<span id="cb17-18">        <span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f"exc_val: </span><span class="sc" style="color: #5E5E5E;">{</span>exc_val<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;">"</span>)</span>
<span id="cb17-19">        <span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f"exc_tb: </span><span class="sc" style="color: #5E5E5E;">{</span>exc_tb<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;">"</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><span class="cf" style="color: #003B4F;">with</span> SafeDivide(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">2</span>) <span class="im" style="color: #00769E;">as</span> d:</span>
<span id="cb18-2">    <span class="bu" style="color: null;">print</span>(d.divide())</span>
<span id="cb18-3">    <span class="bu" style="color: null;">print</span>(<span class="st" style="color: #20794D;">'å•¦å•¦å•¦'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>exec __enter__
1 / 2 = 0.5
å•¦å•¦å•¦

------------
exec __exit__
exec_type: None
exc_val: None
exc_tb: None</code></pre>
</div>
</div>
<p>å¦‚æœæ‰§è¡Œæ²¡æœ‰é—®é¢˜ï¼Œ<code>exc_type</code>, <code>exc_val</code>, <code>exc_tb</code>éƒ½æ˜¯<code>None</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><span class="cf" style="color: #003B4F;">with</span> SafeDivide(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">0</span>) <span class="im" style="color: #00769E;">as</span> d:</span>
<span id="cb20-2">    <span class="bu" style="color: null;">print</span>(d.divide())</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>exec __enter__
1 / 0 = 
------------
exec __exit__
exec_type: &lt;class 'ZeroDivisionError'&gt;
exc_val: division by zero
exc_tb: &lt;traceback object&gt;</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>ZeroDivisionError: division by zero</code></pre>
</div>
</div>
<p>å¦‚æœæ‰§è¡Œå¯¹è±¡çš„æ–¹æ³•å‡ºç°é—®é¢˜ï¼Œå°±ä¼šç›´æ¥æ‰§è¡Œ<code>__exit__</code>æ–¹æ³•ï¼Œ<code>exc_type</code>, <code>exc_val</code>, <code>exc_tb</code>åŒ…å«çš„å°±æ˜¯é”™è¯¯ç±»å‹ï¼Œé”™è¯¯å€¼ï¼Œé”™è¯¯çš„å›æº¯ä¿¡æ¯ã€‚</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>å‡ºé”™åä¸ä¼šæ‰§è¡Œåé¢çš„è¯­å¥ï¼Œæ¯”å¦‚è¿™é‡Œçš„<code>print('å•¦å•¦å•¦')</code>ï¼Œè€Œæ˜¯ç›´æ¥æ‰§è¡Œ<code>__exit__</code>äº†</p>
</div>
</div>


</section>

 ]]></description>
  <category>Python</category>
  <guid>https://chenminicode.github.io/posts/2022-11-08-python_enter_exit/index.html</guid>
  <pubDate>Mon, 07 Nov 2022 16:00:00 GMT</pubDate>
</item>
<item>
  <title>Pythonä¸­çš„å‡ ä¸ªé­”æ³•æ–¹æ³•</title>
  <dc:creator>metseq</dc:creator>
  <link>https://chenminicode.github.io/posts/2022-10-31-python_magic_method/index.html</link>
  <description><![CDATA[ 




<section id="ç±»å’Œå¯¹è±¡çš„__dict__å±æ€§" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> ç±»å’Œå¯¹è±¡çš„<code>__dict__</code>å±æ€§</h1>
<section id="å¯¹è±¡çš„__dict__å±æ€§" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="å¯¹è±¡çš„__dict__å±æ€§"><span class="header-section-number">1.1</span> å¯¹è±¡çš„<code>__dict__</code>å±æ€§</h2>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="kw" style="color: #003B4F;">class</span> Point():</span>
<span id="cb1-2">    <span class="co" style="color: #5E5E5E;">'''Create a Point'''</span></span>
<span id="cb1-3">    my_name <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">'A Point'</span></span>
<span id="cb1-4">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, x, y):</span>
<span id="cb1-5">        <span class="va" style="color: #111111;">self</span>.x <span class="op" style="color: #5E5E5E;">=</span> x</span>
<span id="cb1-6">        <span class="va" style="color: #111111;">self</span>.y <span class="op" style="color: #5E5E5E;">=</span> y</span></code></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">p <span class="op" style="color: #5E5E5E;">=</span> Point(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">4</span>)</span>
<span id="cb2-2">p.__dict__</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>{'x': 3, 'y': 4}</code></pre>
</div>
</div>
<p>å¯¹è±¡çš„<code>__dict__</code>å±æ€§å°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œè¿™ä¸ªå­—å…¸çš„é”®æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œå€¼å°±æ˜¯å¯¹åº”å±æ€§çš„å€¼ã€‚</p>
<p>å½“ç»™å¯¹è±¡å±æ€§å¤åˆ¶çš„æ—¶å€™ï¼Œå°±æ˜¯ä¿®æ”¹<code>__dict__</code>å­—å…¸ã€‚</p>
</section>
<section id="ç±»çš„__dict__å±æ€§" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="ç±»çš„__dict__å±æ€§"><span class="header-section-number">1.2</span> ç±»çš„<code>__dict__</code>å±æ€§</h2>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">Point.__dict__</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>mappingproxy({'__module__': '__main__',
              '__doc__': 'Create a Point',
              'my_name': 'A Point',
              '__init__': &lt;function __main__.Point.__init__(self, x, y)&gt;,
              '__dict__': &lt;attribute '__dict__' of 'Point' objects&gt;,
              '__weakref__': &lt;attribute '__weakref__' of 'Point' objects&gt;})</code></pre>
</div>
</div>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Point</code>ç±»çš„<code>__dict__</code>å±æ€§åŒ…æ‹¬äº†:</p>
<ul>
<li>ç±»çš„æ–‡æ¡£<code>__doc__</code></li>
<li>ç±»ä¸­å®šä¹‰å˜é‡ï¼Œæ¯”å¦‚è¿™é‡Œçš„<code>my_name</code></li>
<li>ç±»çš„æ–¹æ³•</li>
<li>å…¶ä»–ä¸€äº›ä¸çŸ¥é“ä»€ä¹ˆçš„ä¸œè¥¿ğŸ˜“</li>
</ul>
</section>
</section>
<section id="ç±»çš„__repr__å’Œ__str__æ–¹æ³•" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> ç±»çš„<code>__repr__</code>å’Œ<code>__str__</code>æ–¹æ³•</h1>
<section id="repr__æ–¹æ³•" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="repr__æ–¹æ³•"><span class="header-section-number">2.1</span> <code>__repr__</code>æ–¹æ³•</h2>
<p>ç›´æ¥è¾“å‡º<code>p</code>æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸€å †æ²¡ç”¨çš„ä¸œè¥¿</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">p</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>&lt;__main__.Point at 0x7fee391d2110&gt;</code></pre>
</div>
</div>
<p>æˆ‘ä»¬æƒ³æ˜¾ç¤ºå…³äº<code>Point</code>çš„æœ‰ç”¨ä¿¡æ¯ï¼Œè¿™æ—¶<code>__repr__</code>æ–¹æ³•å°±æ´¾ä¸Šç”¨åœºäº†</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="kw" style="color: #003B4F;">class</span> Point():</span>
<span id="cb8-2">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, x, y):</span>
<span id="cb8-3">        <span class="va" style="color: #111111;">self</span>.x <span class="op" style="color: #5E5E5E;">=</span> x</span>
<span id="cb8-4">        <span class="va" style="color: #111111;">self</span>.y <span class="op" style="color: #5E5E5E;">=</span> y</span>
<span id="cb8-5">    </span>
<span id="cb8-6">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__repr__</span>(<span class="va" style="color: #111111;">self</span>):</span>
<span id="cb8-7">        <span class="cf" style="color: #003B4F;">return</span> <span class="st" style="color: #20794D;">"Point(x=</span><span class="sc" style="color: #5E5E5E;">%r</span><span class="st" style="color: #20794D;">, y=</span><span class="sc" style="color: #5E5E5E;">%r</span><span class="st" style="color: #20794D;">)"</span> <span class="op" style="color: #5E5E5E;">%</span> (<span class="va" style="color: #111111;">self</span>.x, <span class="va" style="color: #111111;">self</span>.y)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">p <span class="op" style="color: #5E5E5E;">=</span> Point(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">4</span>)</span>
<span id="cb9-2">p</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>Point(x=3, y=4)</code></pre>
</div>
</div>
</section>
<section id="str__æ–¹æ³•" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="str__æ–¹æ³•"><span class="header-section-number">2.2</span> <code>__str__</code>æ–¹æ³•</h2>
<p><code>__str__</code>æ–¹æ³•å’Œ<code>__repr__</code>æ–¹æ³•å¥½åƒéƒ½æ˜¯ç”¨å­—ç¬¦è¡¨ç¤ºå¯¹è±¡çš„ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p><a href="https://stackoverflow.com/questions/1436703/what-is-the-difference-between-str-and-repr">stackoverflow</a>æœ‰ä¸€ä¸ªå›ç­”è¯´:</p>
<ul>
<li><code>__repr__</code>æ˜¾ç¤ºçš„ä¿¡æ¯éœ€è¦é¿å…æ­§ä¹‰</li>
<li><code>__str__</code>æ˜¾ç¤ºçš„ä¿¡æ¯æ³¨é‡å¯è¯»æ€§ï¼Œæ–¹ä¾¿ç†è§£</li>
<li><code>__str__</code>ä½¿ç”¨äº†<code>__repr</code></li>
</ul>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="bu" style="color: null;">str</span>(p)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>'Point(x=3, y=4)'</code></pre>
</div>
</div>
<p>åœ¨<code>Point</code>ä¸­å¦‚æœæ²¡æœ‰é‡å†™<code>__str__</code>æ–¹æ³•ï¼Œä¼šè°ƒç”¨<code>__repr__</code>è¾“å‡ºçš„ç»“æœ</p>
<p>å¦‚æœåœ¨<code>Point</code>ä¸­é‡å†™äº†<code>__str__</code>æ–¹æ³•ï¼Œå°±ä¼šè¾“å‡º<code>__str__</code>è°ƒç”¨çš„ç»“æœã€‚</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="kw" style="color: #003B4F;">class</span> Point():</span>
<span id="cb13-2">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, x, y):</span>
<span id="cb13-3">        <span class="va" style="color: #111111;">self</span>.x <span class="op" style="color: #5E5E5E;">=</span> x</span>
<span id="cb13-4">        <span class="va" style="color: #111111;">self</span>.y <span class="op" style="color: #5E5E5E;">=</span> y</span>
<span id="cb13-5">    </span>
<span id="cb13-6">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__repr__</span>(<span class="va" style="color: #111111;">self</span>):</span>
<span id="cb13-7">        <span class="cf" style="color: #003B4F;">return</span> <span class="st" style="color: #20794D;">"Point(x=</span><span class="sc" style="color: #5E5E5E;">%r</span><span class="st" style="color: #20794D;">, y=</span><span class="sc" style="color: #5E5E5E;">%r</span><span class="st" style="color: #20794D;">)"</span> <span class="op" style="color: #5E5E5E;">%</span> (<span class="va" style="color: #111111;">self</span>.x, <span class="va" style="color: #111111;">self</span>.y)</span>
<span id="cb13-8">    </span>
<span id="cb13-9">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__str__</span>(<span class="va" style="color: #111111;">self</span>):</span>
<span id="cb13-10">        <span class="cf" style="color: #003B4F;">return</span> <span class="ss" style="color: #20794D;">f'Just a normal 2d point(</span><span class="sc" style="color: #5E5E5E;">{</span><span class="va" style="color: #111111;">self</span><span class="sc" style="color: #5E5E5E;">.</span>x<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;">, </span><span class="sc" style="color: #5E5E5E;">{</span><span class="va" style="color: #111111;">self</span><span class="sc" style="color: #5E5E5E;">.</span>y<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;">)'</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1">p <span class="op" style="color: #5E5E5E;">=</span> Point(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">4</span>)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1">p</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>Point(x=3, y=4)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><span class="bu" style="color: null;">repr</span>(p)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>'Point(x=3, y=4)'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><span class="bu" style="color: null;">print</span>(p)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Just a normal 2d point(3, 4)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><span class="bu" style="color: null;">str</span>(p)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>'Just a normal 2d point(3, 4)'</code></pre>
</div>
</div>
</section>
</section>
<section id="ç±»çš„__setattr__æ–¹æ³•" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> ç±»çš„<code>__setattr__</code>æ–¹æ³•</h1>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1">p <span class="op" style="color: #5E5E5E;">=</span> Point(<span class="st" style="color: #20794D;">'3'</span>, <span class="st" style="color: #20794D;">'4'</span>)</span>
<span id="cb23-2">p</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>Point(x='3', y='4')</code></pre>
</div>
</div>
<p>æƒ³åœ¨åˆå§‹åŒ–Pointçš„æ—¶å€™ï¼ŒæŠŠxï¼Œyå±æ€§è½¬å˜æˆfloatç±»å‹ï¼Œ<code>__setattr__</code>æ–¹æ³•å°±èƒ½ç”¨ä¸Šäº†</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><span class="kw" style="color: #003B4F;">class</span> Point():</span>
<span id="cb25-2">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, x, y):</span>
<span id="cb25-3">        <span class="va" style="color: #111111;">self</span>.x <span class="op" style="color: #5E5E5E;">=</span> x</span>
<span id="cb25-4">        <span class="va" style="color: #111111;">self</span>.y <span class="op" style="color: #5E5E5E;">=</span> y</span>
<span id="cb25-5">    </span>
<span id="cb25-6">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__setattr__</span>(<span class="va" style="color: #111111;">self</span>, name, value):</span>
<span id="cb25-7">        <span class="va" style="color: #111111;">self</span>.__dict__[name] <span class="op" style="color: #5E5E5E;">=</span> <span class="bu" style="color: null;">float</span>(value)</span>
<span id="cb25-8">    </span>
<span id="cb25-9">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__repr__</span>(<span class="va" style="color: #111111;">self</span>):</span>
<span id="cb25-10">        <span class="cf" style="color: #003B4F;">return</span> <span class="st" style="color: #20794D;">"Point(x=</span><span class="sc" style="color: #5E5E5E;">%r</span><span class="st" style="color: #20794D;">, y=</span><span class="sc" style="color: #5E5E5E;">%r</span><span class="st" style="color: #20794D;">)"</span> <span class="op" style="color: #5E5E5E;">%</span> (<span class="va" style="color: #111111;">self</span>.x, <span class="va" style="color: #111111;">self</span>.y)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1">p <span class="op" style="color: #5E5E5E;">=</span> Point(<span class="st" style="color: #20794D;">'3'</span>, <span class="st" style="color: #20794D;">'4'</span>)</span>
<span id="cb26-2">p</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>Point(x=3.0, y=4.0)</code></pre>
</div>
</div>
<div class="sourceCode" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1">p.__dict__</span></code></pre></div>
<p>pçš„xå’Œyå±æ€§éƒ½å·²ç»æ˜¯floatç±»å‹äº†ï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p>
<p>åœ¨ç±»çš„<code>__init__</code>å‡½æ•°ä¸­ï¼Œ<code>self.x =</code>xè¿™ä¸€å¥ï¼Œ<code>self.x</code>çš„å€¼è®¾ä¸º<code>x</code>ï¼Œ</p>
<p>å½“é‡åˆ°è¿™ç§<code>å¯¹è±¡.å±æ€§ = å€¼</code>çš„æ—¶å€™ï¼Œå¦‚æœé‡å†™äº†<code>__setattr__</code>æ–¹æ³•ï¼Œå°±ä¼šè°ƒç”¨<code>__setattr__</code>æ–¹æ³•ï¼Œ</p>
<p>ä¹Ÿå°±æ˜¯è¯´å½“é‡åˆ°<code>å¯¹è±¡.å±æ€§ = å€¼</code>ï¼Œç›¸å½“äºè°ƒç”¨äº†<code>__setattr__(å¯¹è±¡, å±æ€§, å€¼)</code></p>
<p>åœ¨è¿™é‡Œç›¸å½“äº<code>__setattr__(self, 'x', x)</code>ï¼Œåœ¨<code>__setattr__</code>å‡½æ•°é‡Œä¿®æ”¹äº†<code>self.__dict__['x'] = float(value)</code></p>
<p><code>__setattr__</code>å‡½æ•°é‡Œé¢å¯ä»¥åšä½ æƒ³åšçš„ä»»ä½•äº‹æƒ…ï¼Œä¸ä»…ä»…æ˜¯æ”¹å˜é»˜è®¤çš„å±æ€§èµ‹å€¼æ“ä½œ</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><span class="kw" style="color: #003B4F;">class</span> Point():</span>
<span id="cb29-2">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__init__</span>(<span class="va" style="color: #111111;">self</span>, x, y):</span>
<span id="cb29-3">        <span class="va" style="color: #111111;">self</span>._modules <span class="op" style="color: #5E5E5E;">=</span> {}</span>
<span id="cb29-4">        <span class="va" style="color: #111111;">self</span>.x <span class="op" style="color: #5E5E5E;">=</span> x</span>
<span id="cb29-5">        <span class="va" style="color: #111111;">self</span>.y <span class="op" style="color: #5E5E5E;">=</span> y</span>
<span id="cb29-6">    </span>
<span id="cb29-7">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__setattr__</span>(<span class="va" style="color: #111111;">self</span>, name, value):</span>
<span id="cb29-8">        <span class="cf" style="color: #003B4F;">if</span> <span class="kw" style="color: #003B4F;">not</span> name.startswith(<span class="st" style="color: #20794D;">'_'</span>):</span>
<span id="cb29-9">            <span class="va" style="color: #111111;">self</span>._modules[name] <span class="op" style="color: #5E5E5E;">=</span> value</span>
<span id="cb29-10">            <span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f'add </span><span class="sc" style="color: #5E5E5E;">{</span>name<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;">:</span><span class="sc" style="color: #5E5E5E;">{</span>value<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;"> to _module'</span>)</span>
<span id="cb29-11">        <span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f'set </span><span class="sc" style="color: #5E5E5E;">{</span>name<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;"> to </span><span class="sc" style="color: #5E5E5E;">{</span>value<span class="sc" style="color: #5E5E5E;">}</span><span class="ss" style="color: #20794D;">'</span>)</span>
<span id="cb29-12">        <span class="bu" style="color: null;">super</span>().<span class="fu" style="color: #4758AB;">__setattr__</span>(name, value)</span>
<span id="cb29-13">        </span>
<span id="cb29-14">    <span class="kw" style="color: #003B4F;">def</span> <span class="fu" style="color: #4758AB;">__repr__</span>(<span class="va" style="color: #111111;">self</span>):</span>
<span id="cb29-15">        <span class="cf" style="color: #003B4F;">return</span> <span class="st" style="color: #20794D;">"Point(x=</span><span class="sc" style="color: #5E5E5E;">%r</span><span class="st" style="color: #20794D;">, y=</span><span class="sc" style="color: #5E5E5E;">%r</span><span class="st" style="color: #20794D;">)"</span> <span class="op" style="color: #5E5E5E;">%</span> (<span class="va" style="color: #111111;">self</span>.x, <span class="va" style="color: #111111;">self</span>.y)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1">p <span class="op" style="color: #5E5E5E;">=</span> Point(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">4</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>set _modules to {}
add x:3 to _module
set x to 3
add y:4 to _module
set y to 4</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1">p._modules</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>{'x': 3, 'y': 4}</code></pre>
</div>
</div>


</section>

 ]]></description>
  <category>Python</category>
  <guid>https://chenminicode.github.io/posts/2022-10-31-python_magic_method/index.html</guid>
  <pubDate>Sun, 30 Oct 2022 16:00:00 GMT</pubDate>
</item>
<item>
  <title>åšå®¢åŸå› </title>
  <dc:creator>metseq</dc:creator>
  <link>https://chenminicode.github.io/posts/2018-07-19-blog_reason/index.html</link>
  <description><![CDATA[ 




<p>æœ€å¼€å§‹å»ºè¿™ä¸ªåšå®¢ï¼Œçº¯ç²¹æƒ³äº†è§£æ€æ ·åœ¨githubä¸Šï¼Œç”¨Jekllæ­å»ºåšå®¢ã€‚æ­å¥½åï¼Œå‘ç°è¿™é‡Œå¯ä»¥è®°å½•è‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹ã€‚å› ä¸ºæˆ‘å¾ˆå¥å¿˜ï¼Œä»Šå¤©æƒ³åˆ°å­¦ä¹ ä»€ä¹ˆæœ‰è¶£çš„ä¸œè¥¿ï¼Œæ˜å¤©å¯èƒ½å°±å¿˜äº†ã€‚</p>
<p>å¾ˆå¤šäººéƒ½åœ¨è¯´è‡ªå·±æ˜¯ä¸€ä¸ªç»ˆç”Ÿå­¦ä¹ çš„äººï¼Œå­¦æ ¡ä¹Ÿåœ¨æå€¡ç»ˆç”Ÿå­¦ä¹ ã€‚è¿™é‡Œæœ‰3ä¸ªé—®é¢˜ï¼š 1. æ˜¯å¦çœŸçš„ä¸€ç›´åœ¨å­¦ä¹ ï¼Ÿ 2. å­¦ä¹ ä»€ä¹ˆï¼Ÿ 3. åœ¨â€œä¸€ç”Ÿâ€çš„æ—¶é—´å°ºåº¦ä¸‹ï¼Œå­¦ä¹ çš„è§„åˆ’æ˜¯å¦æœ‰æ•ˆï¼Ÿ</p>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜åªæœ‰ç›–æ£ºå®šè®ºæ—¶ï¼Œæ‰èƒ½å›ç­”ã€‚æŠŠæˆ‘çš„å­¦ä¹ è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œç£ä¿ƒè‡ªå·±ä¿æŒå­¦ä¹ çš„ä¹ æƒ¯ï¼Œä¸æ‰¾å€Ÿå£ä¸­æ­¢äº†å­¦ä¹ ã€‚</p>
<p>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå½“ç„¶æ˜¯å­¦ä¹ è‡ªå·±æ„Ÿå…´è¶£çš„å’Œæœ‰ç”¨çš„ä¸œè¥¿ã€‚ç°åœ¨çš„æ•™è‚²ï¼Œå¯¼è‡´å­¦ç”Ÿæ²¡æœ‰å…´è¶£ï¼Œä¸çŸ¥é“è‡ªå·±å–œæ¬¢ä»€ä¹ˆã€‚åœ¨é«˜è€ƒåï¼Œä¸çŸ¥é“æŠ¥ä»€ä¹ˆä¸“ä¸šï¼Œåº”ä¸ºæ ¹æœ¬å°±ä¸çŸ¥é“è‡ªå·±å–œæ¬¢ä»€ä¹ˆï¼Œæƒ³ä»äº‹ä»€ä¹ˆæ ·çš„èŒä¸šï¼Œè¿‡æ€æ ·çš„ç”Ÿæ´»ã€‚è€Œä¸”è‡ªå·±å–œæ¬¢çš„ä¸œè¥¿ï¼Œæœªå¿…çœŸçš„äº†è§£ã€‚æˆ‘æŠ¥çš„ä¸“ä¸šï¼Œé«˜ä¸­ä»¥ä¸ºæ˜¯å–œæ¬¢çš„ï¼Œäº†è§£ä¹‹åå‘ç°æ˜¯å¦ä¸€å›äº‹ã€‚ä¹Ÿè®¸ä½ ä¼šè¯´åœ¨æ²¡æœ‰å­¦ä¹ é‚£ä¸ªä¸“ä¸šä¹‹å‰ï¼Œæ˜¯ä¸ä¼šçœŸæ­£äº†è§£çš„ã€‚è¿™æ˜¯æƒ¯ç”¨çš„ç†ç”±ï¼Œä½†æ˜¯åœ¨çœŸæ­£å­¦ä¹ ä¹‹å‰ï¼Œå¯ä»¥äº†è§£è¿™ä¸ªä¸“ä¸šçš„ä¸€äº›èƒŒæ™¯ï¼Œè¿™äº›çŸ¥è¯†è¶³å¤Ÿä½ åšä¸€ä¸ªåˆç†çš„é€‰æ‹©ã€‚</p>
<p>æ…¢æ…¢çš„ï¼ŒæŠŠä¹‹å‰å¾—åˆ°çš„è§‚å¿µé‡æ–°åšäº†å®¡è§†ï¼Œåƒç¬›å¡å°”æ€€ç–‘ä¸€åˆ‡ä¸€æ ·ï¼Œå»æ€€ç–‘æˆ‘æ›¾ç»å­¦åˆ°çš„ä¸œè¥¿ï¼›æ¸æ¸æˆ‘å‘ç°è‡ªå·±çš„å…´è¶£å€¾å‘ï¼š - å–œæ¬¢äº†è§£èƒŒåçš„åŸç†ã€ç®—æ³•ï¼Œè€Œä¸ä»…ä»…æ˜¯å¤–è¡¨ - å–œæ¬¢è®¡ç®—æœºï¼Œåº”ä¸ºæƒ³åˆ°çš„ä¸œè¥¿å¯ä»¥é©¬ä¸Šæ“ä½œå®éªŒ</p>
<p>ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œæ€æ ·çš„å­¦ä¹ è§„åˆ’é€‚åˆé•¿å°ºåº¦ä¸‹çš„å­¦ä¹ ã€‚ Peter Norvigå†™äº†ä¸€ç¯‡æ–‡ç« ã€ŠTeach Yourself Programmin in Ten Yearsã€‹ï¼ˆ10å¹´è‡ªå­¦ç¼–ç¨‹ï¼‰ï¼Œè®²äº†ç°åœ¨å¾ˆå¤šäººå­¦ä¹ æ€¥åŠŸè¿‘åˆ©ï¼Œå¦‚24å°æ—¶è‡ªå­¦Javaã€‚æ–‡ä¸­ç»™æœ‰å¿—äºè‡ªå­¦ç¼–ç¨‹çš„äººä¸€äº›å¾ˆå¥½çš„å»ºè®®ã€‚å»ºè®®åªæœ‰åœ¨çœŸæ­£è¢«é‡‡ç”¨ï¼Œè€Œèµ·åˆ°å¥½ä½œç”¨æ—¶æ‰æ˜¯å»ºè®®ã€‚ç« å¤ªç‚åœ¨ã€Šä»Šæ—¥é’å¹´ä¹‹å¼±ç‚¹ã€‹ä¸€æ–‡ä¸­ï¼Œå†™åˆ°â€œç°åœ¨é’å¹´ç¬¬ä¸€å¼±ç‚¹ï¼Œå°±æ˜¯æŠŠäº‹æƒ…å¤ªçœ‹å®¹æ˜“ï¼Œå…¶ç»“æœä¸æ˜¯ä¾¥å¹¸ï¼Œä¾¿æ˜¯é€€å´ã€‚â€ï¼Œâ€œç°åœ¨é’å¹´åªæœ‰å°†è¿™ä¸ªå¼±ç‚¹ç—›æ”¹ï¼Œé‡äº‹å®œæ…é‡ï¼Œå†³æœºå®œæ•é€Ÿï¼ŒæŠ±å¿—æ—¢æåšç¡®ï¼Œè§‚å¯Ÿåˆææ˜äº†ï¼Œåˆ™æ— æ‰€è°“ä¾¥å¹¸é€€å´ï¼Œåªæœ‰ç™¾æŠ˜åƒå›ä»¥è¾¾å¾äººæœ€ç»ˆä¹‹ç›®çš„è€Œå·²ã€‚â€ã€‚å­¦ä¹ ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼Œèƒ½å¾ˆå®¹æ˜“å­¦ä¼šçš„äº‹ä¹Ÿä¸è¶³ä»¥æˆä¸ºä½ è‡ªå·±ã€‚æˆ‘æƒ³åœ¨è¿™é‡Œè®°å½•æˆ‘çš„å­¦ä¹ è¿‡ç¨‹ï¼Œå®éªŒæˆ‘çš„å­¦ä¹ è®¡åˆ’ã€‚è‡³äºæ˜¯å¦æœ‰æ•ˆï¼Œç­‰è¿‡åçœ‹å°±çŸ¥é“äº†ã€‚</p>



 ]]></description>
  <category>essay</category>
  <guid>https://chenminicode.github.io/posts/2018-07-19-blog_reason/index.html</guid>
  <pubDate>Wed, 18 Jul 2018 16:00:00 GMT</pubDate>
</item>
</channel>
</rss>
