[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Hello, I am Min, a bioinformatics engineerğŸ§¬.\nI love PythonğŸ, MLğŸ¤– and FreedomğŸš€.\nHope you can find something interesting hereğŸ˜€."
  },
  {
    "objectID": "posts/2018-07-19-blog_reason/index.html",
    "href": "posts/2018-07-19-blog_reason/index.html",
    "title": "åšå®¢åŸå› ",
    "section": "",
    "text": "æœ€å¼€å§‹å»ºè¿™ä¸ªåšå®¢ï¼Œçº¯ç²¹æƒ³äº†è§£æ€æ ·åœ¨githubä¸Šï¼Œç”¨Jekllæ­å»ºåšå®¢ã€‚æ­å¥½åï¼Œå‘ç°è¿™é‡Œå¯ä»¥è®°å½•è‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹ã€‚å› ä¸ºæˆ‘å¾ˆå¥å¿˜ï¼Œä»Šå¤©æƒ³åˆ°å­¦ä¹ ä»€ä¹ˆæœ‰è¶£çš„ä¸œè¥¿ï¼Œæ˜å¤©å¯èƒ½å°±å¿˜äº†ã€‚\nå¾ˆå¤šäººéƒ½åœ¨è¯´è‡ªå·±æ˜¯ä¸€ä¸ªç»ˆç”Ÿå­¦ä¹ çš„äººï¼Œå­¦æ ¡ä¹Ÿåœ¨æå€¡ç»ˆç”Ÿå­¦ä¹ ã€‚è¿™é‡Œæœ‰3ä¸ªé—®é¢˜ï¼š 1. æ˜¯å¦çœŸçš„ä¸€ç›´åœ¨å­¦ä¹ ï¼Ÿ 2. å­¦ä¹ ä»€ä¹ˆï¼Ÿ 3. åœ¨â€œä¸€ç”Ÿâ€çš„æ—¶é—´å°ºåº¦ä¸‹ï¼Œå­¦ä¹ çš„è§„åˆ’æ˜¯å¦æœ‰æ•ˆï¼Ÿ\nç¬¬ä¸€ä¸ªé—®é¢˜åªæœ‰ç›–æ£ºå®šè®ºæ—¶ï¼Œæ‰èƒ½å›ç­”ã€‚æŠŠæˆ‘çš„å­¦ä¹ è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œç£ä¿ƒè‡ªå·±ä¿æŒå­¦ä¹ çš„ä¹ æƒ¯ï¼Œä¸æ‰¾å€Ÿå£ä¸­æ­¢äº†å­¦ä¹ ã€‚\nç¬¬äºŒä¸ªé—®é¢˜ï¼Œå½“ç„¶æ˜¯å­¦ä¹ è‡ªå·±æ„Ÿå…´è¶£çš„å’Œæœ‰ç”¨çš„ä¸œè¥¿ã€‚ç°åœ¨çš„æ•™è‚²ï¼Œå¯¼è‡´å­¦ç”Ÿæ²¡æœ‰å…´è¶£ï¼Œä¸çŸ¥é“è‡ªå·±å–œæ¬¢ä»€ä¹ˆã€‚åœ¨é«˜è€ƒåï¼Œä¸çŸ¥é“æŠ¥ä»€ä¹ˆä¸“ä¸šï¼Œåº”ä¸ºæ ¹æœ¬å°±ä¸çŸ¥é“è‡ªå·±å–œæ¬¢ä»€ä¹ˆï¼Œæƒ³ä»äº‹ä»€ä¹ˆæ ·çš„èŒä¸šï¼Œè¿‡æ€æ ·çš„ç”Ÿæ´»ã€‚è€Œä¸”è‡ªå·±å–œæ¬¢çš„ä¸œè¥¿ï¼Œæœªå¿…çœŸçš„äº†è§£ã€‚æˆ‘æŠ¥çš„ä¸“ä¸šï¼Œé«˜ä¸­ä»¥ä¸ºæ˜¯å–œæ¬¢çš„ï¼Œäº†è§£ä¹‹åå‘ç°æ˜¯å¦ä¸€å›äº‹ã€‚ä¹Ÿè®¸ä½ ä¼šè¯´åœ¨æ²¡æœ‰å­¦ä¹ é‚£ä¸ªä¸“ä¸šä¹‹å‰ï¼Œæ˜¯ä¸ä¼šçœŸæ­£äº†è§£çš„ã€‚è¿™æ˜¯æƒ¯ç”¨çš„ç†ç”±ï¼Œä½†æ˜¯åœ¨çœŸæ­£å­¦ä¹ ä¹‹å‰ï¼Œå¯ä»¥äº†è§£è¿™ä¸ªä¸“ä¸šçš„ä¸€äº›èƒŒæ™¯ï¼Œè¿™äº›çŸ¥è¯†è¶³å¤Ÿä½ åšä¸€ä¸ªåˆç†çš„é€‰æ‹©ã€‚\næ…¢æ…¢çš„ï¼ŒæŠŠä¹‹å‰å¾—åˆ°çš„è§‚å¿µé‡æ–°åšäº†å®¡è§†ï¼Œåƒç¬›å¡å°”æ€€ç–‘ä¸€åˆ‡ä¸€æ ·ï¼Œå»æ€€ç–‘æˆ‘æ›¾ç»å­¦åˆ°çš„ä¸œè¥¿ï¼›æ¸æ¸æˆ‘å‘ç°è‡ªå·±çš„å…´è¶£å€¾å‘ï¼š - å–œæ¬¢äº†è§£èƒŒåçš„åŸç†ã€ç®—æ³•ï¼Œè€Œä¸ä»…ä»…æ˜¯å¤–è¡¨ - å–œæ¬¢è®¡ç®—æœºï¼Œåº”ä¸ºæƒ³åˆ°çš„ä¸œè¥¿å¯ä»¥é©¬ä¸Šæ“ä½œå®éªŒ\nç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œæ€æ ·çš„å­¦ä¹ è§„åˆ’é€‚åˆé•¿å°ºåº¦ä¸‹çš„å­¦ä¹ ã€‚ Peter Norvigå†™äº†ä¸€ç¯‡æ–‡ç« ã€ŠTeach Yourself Programmin in Ten Yearsã€‹ï¼ˆ10å¹´è‡ªå­¦ç¼–ç¨‹ï¼‰ï¼Œè®²äº†ç°åœ¨å¾ˆå¤šäººå­¦ä¹ æ€¥åŠŸè¿‘åˆ©ï¼Œå¦‚24å°æ—¶è‡ªå­¦Javaã€‚æ–‡ä¸­ç»™æœ‰å¿—äºè‡ªå­¦ç¼–ç¨‹çš„äººä¸€äº›å¾ˆå¥½çš„å»ºè®®ã€‚å»ºè®®åªæœ‰åœ¨çœŸæ­£è¢«é‡‡ç”¨ï¼Œè€Œèµ·åˆ°å¥½ä½œç”¨æ—¶æ‰æ˜¯å»ºè®®ã€‚ç« å¤ªç‚åœ¨ã€Šä»Šæ—¥é’å¹´ä¹‹å¼±ç‚¹ã€‹ä¸€æ–‡ä¸­ï¼Œå†™åˆ°â€œç°åœ¨é’å¹´ç¬¬ä¸€å¼±ç‚¹ï¼Œå°±æ˜¯æŠŠäº‹æƒ…å¤ªçœ‹å®¹æ˜“ï¼Œå…¶ç»“æœä¸æ˜¯ä¾¥å¹¸ï¼Œä¾¿æ˜¯é€€å´ã€‚â€ï¼Œâ€œç°åœ¨é’å¹´åªæœ‰å°†è¿™ä¸ªå¼±ç‚¹ç—›æ”¹ï¼Œé‡äº‹å®œæ…é‡ï¼Œå†³æœºå®œæ•é€Ÿï¼ŒæŠ±å¿—æ—¢æåšç¡®ï¼Œè§‚å¯Ÿåˆææ˜äº†ï¼Œåˆ™æ— æ‰€è°“ä¾¥å¹¸é€€å´ï¼Œåªæœ‰ç™¾æŠ˜åƒå›ä»¥è¾¾å¾äººæœ€ç»ˆä¹‹ç›®çš„è€Œå·²ã€‚â€ã€‚å­¦ä¹ ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼Œèƒ½å¾ˆå®¹æ˜“å­¦ä¼šçš„äº‹ä¹Ÿä¸è¶³ä»¥æˆä¸ºä½ è‡ªå·±ã€‚æˆ‘æƒ³åœ¨è¿™é‡Œè®°å½•æˆ‘çš„å­¦ä¹ è¿‡ç¨‹ï¼Œå®éªŒæˆ‘çš„å­¦ä¹ è®¡åˆ’ã€‚è‡³äºæ˜¯å¦æœ‰æ•ˆï¼Œç­‰è¿‡åçœ‹å°±çŸ¥é“äº†ã€‚"
  },
  {
    "objectID": "posts/2022-10-31-python_magic_method/index.html",
    "href": "posts/2022-10-31-python_magic_method/index.html",
    "title": "Pythonä¸­çš„å‡ ä¸ªé­”æ³•æ–¹æ³•",
    "section": "",
    "text": "class Point():\n    '''Create a Point'''\n    my_name = 'A Point'\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\n\np = Point(3, 4)\np.__dict__\n\n{'x': 3, 'y': 4}\n\n\nå¯¹è±¡çš„__dict__å±æ€§å°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œè¿™ä¸ªå­—å…¸çš„é”®æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œå€¼å°±æ˜¯å¯¹åº”å±æ€§çš„å€¼ã€‚\nå½“ç»™å¯¹è±¡å±æ€§å¤åˆ¶çš„æ—¶å€™ï¼Œå°±æ˜¯ä¿®æ”¹__dict__å­—å…¸ã€‚\n\n\n\n\nPoint.__dict__\n\nmappingproxy({'__module__': '__main__',\n              '__doc__': 'Create a Point',\n              'my_name': 'A Point',\n              '__init__': &lt;function __main__.Point.__init__(self, x, y)&gt;,\n              '__dict__': &lt;attribute '__dict__' of 'Point' objects&gt;,\n              '__weakref__': &lt;attribute '__weakref__' of 'Point' objects&gt;})\n\n\nå¯ä»¥çœ‹åˆ°ï¼ŒPointç±»çš„__dict__å±æ€§åŒ…æ‹¬äº†:\n\nç±»çš„æ–‡æ¡£__doc__\nç±»ä¸­å®šä¹‰å˜é‡ï¼Œæ¯”å¦‚è¿™é‡Œçš„my_name\nç±»çš„æ–¹æ³•\nå…¶ä»–ä¸€äº›ä¸çŸ¥é“ä»€ä¹ˆçš„ä¸œè¥¿ğŸ˜“"
  },
  {
    "objectID": "posts/2022-10-31-python_magic_method/index.html#å¯¹è±¡çš„__dict__å±æ€§",
    "href": "posts/2022-10-31-python_magic_method/index.html#å¯¹è±¡çš„__dict__å±æ€§",
    "title": "Pythonä¸­çš„å‡ ä¸ªé­”æ³•æ–¹æ³•",
    "section": "",
    "text": "class Point():\n    '''Create a Point'''\n    my_name = 'A Point'\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\n\np = Point(3, 4)\np.__dict__\n\n{'x': 3, 'y': 4}\n\n\nå¯¹è±¡çš„__dict__å±æ€§å°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œè¿™ä¸ªå­—å…¸çš„é”®æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œå€¼å°±æ˜¯å¯¹åº”å±æ€§çš„å€¼ã€‚\nå½“ç»™å¯¹è±¡å±æ€§å¤åˆ¶çš„æ—¶å€™ï¼Œå°±æ˜¯ä¿®æ”¹__dict__å­—å…¸ã€‚"
  },
  {
    "objectID": "posts/2022-10-31-python_magic_method/index.html#ç±»çš„__dict__å±æ€§",
    "href": "posts/2022-10-31-python_magic_method/index.html#ç±»çš„__dict__å±æ€§",
    "title": "Pythonä¸­çš„å‡ ä¸ªé­”æ³•æ–¹æ³•",
    "section": "",
    "text": "Point.__dict__\n\nmappingproxy({'__module__': '__main__',\n              '__doc__': 'Create a Point',\n              'my_name': 'A Point',\n              '__init__': &lt;function __main__.Point.__init__(self, x, y)&gt;,\n              '__dict__': &lt;attribute '__dict__' of 'Point' objects&gt;,\n              '__weakref__': &lt;attribute '__weakref__' of 'Point' objects&gt;})\n\n\nå¯ä»¥çœ‹åˆ°ï¼ŒPointç±»çš„__dict__å±æ€§åŒ…æ‹¬äº†:\n\nç±»çš„æ–‡æ¡£__doc__\nç±»ä¸­å®šä¹‰å˜é‡ï¼Œæ¯”å¦‚è¿™é‡Œçš„my_name\nç±»çš„æ–¹æ³•\nå…¶ä»–ä¸€äº›ä¸çŸ¥é“ä»€ä¹ˆçš„ä¸œè¥¿ğŸ˜“"
  },
  {
    "objectID": "posts/2022-10-31-python_magic_method/index.html#repr__æ–¹æ³•",
    "href": "posts/2022-10-31-python_magic_method/index.html#repr__æ–¹æ³•",
    "title": "Pythonä¸­çš„å‡ ä¸ªé­”æ³•æ–¹æ³•",
    "section": "2.1 __repr__æ–¹æ³•",
    "text": "2.1 __repr__æ–¹æ³•\nç›´æ¥è¾“å‡ºpæ—¶ï¼Œä¼šæ˜¾ç¤ºä¸€å †æ²¡ç”¨çš„ä¸œè¥¿\n\np\n\n&lt;__main__.Point at 0x10d4f4eb0&gt;\n\n\næˆ‘ä»¬æƒ³æ˜¾ç¤ºå…³äºPointçš„æœ‰ç”¨ä¿¡æ¯ï¼Œè¿™æ—¶__repr__æ–¹æ³•å°±æ´¾ä¸Šç”¨åœºäº†\n\nclass Point():\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n    \n    def __repr__(self):\n        return \"Point(x=%r, y=%r)\" % (self.x, self.y)\n\n\np = Point(3, 4)\np\n\nPoint(x=3, y=4)"
  },
  {
    "objectID": "posts/2022-10-31-python_magic_method/index.html#str__æ–¹æ³•",
    "href": "posts/2022-10-31-python_magic_method/index.html#str__æ–¹æ³•",
    "title": "Pythonä¸­çš„å‡ ä¸ªé­”æ³•æ–¹æ³•",
    "section": "2.2 __str__æ–¹æ³•",
    "text": "2.2 __str__æ–¹æ³•\n__str__æ–¹æ³•å’Œ__repr__æ–¹æ³•å¥½åƒéƒ½æ˜¯ç”¨å­—ç¬¦è¡¨ç¤ºå¯¹è±¡çš„ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\nstackoverflowæœ‰ä¸€ä¸ªå›ç­”è¯´:\n\n__repr__æ˜¾ç¤ºçš„ä¿¡æ¯éœ€è¦é¿å…æ­§ä¹‰\n__str__æ˜¾ç¤ºçš„ä¿¡æ¯æ³¨é‡å¯è¯»æ€§ï¼Œæ–¹ä¾¿ç†è§£\n__str__ä½¿ç”¨äº†__repr\n\n\nstr(p)\n\n'Point(x=3, y=4)'\n\n\nåœ¨Pointä¸­å¦‚æœæ²¡æœ‰é‡å†™__str__æ–¹æ³•ï¼Œä¼šè°ƒç”¨__repr__è¾“å‡ºçš„ç»“æœ\nå¦‚æœåœ¨Pointä¸­é‡å†™äº†__str__æ–¹æ³•ï¼Œå°±ä¼šè¾“å‡º__str__è°ƒç”¨çš„ç»“æœã€‚\n\nclass Point():\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n    \n    def __repr__(self):\n        return \"Point(x=%r, y=%r)\" % (self.x, self.y)\n    \n    def __str__(self):\n        return f'Just a normal 2d point({self.x}, {self.y})'\n\n\np = Point(3, 4)\n\n\np\n\nPoint(x=3, y=4)\n\n\n\nrepr(p)\n\n'Point(x=3, y=4)'\n\n\n\nprint(p)\n\nJust a normal 2d point(3, 4)\n\n\n\nstr(p)\n\n'Just a normal 2d point(3, 4)'"
  },
  {
    "objectID": "posts/2023-04-26-k-means/index.html",
    "href": "posts/2023-04-26-k-means/index.html",
    "title": "K-means from scratch",
    "section": "",
    "text": "import torch\nimport math\nimport matplotlib.pyplot as plt\nfrom functools import partial\ntorch.set_printoptions(precision=3, linewidth=140, sci_mode=False)"
  },
  {
    "objectID": "posts/2023-04-26-k-means/index.html#init-mean",
    "href": "posts/2023-04-26-k-means/index.html#init-mean",
    "title": "K-means from scratch",
    "section": "3.1 Init mean",
    "text": "3.1 Init mean\n\nk = 6\n\n\nperm = torch.randperm(X.size(0))\n\n\nidx = perm[:k]\nmeans = X[idx].clone()\nmeans\n\ntensor([[ 13.227,  -8.303],\n        [ 11.784,  11.362],\n        [ 15.491,  -4.326],\n        [ 12.847, -19.425],\n        [ 15.780,  17.934],\n        [ -2.511,  -3.635]])\n\n\n\nplot_data(means, X, 250)"
  },
  {
    "objectID": "posts/2023-04-26-k-means/index.html#calculate-distance",
    "href": "posts/2023-04-26-k-means/index.html#calculate-distance",
    "title": "K-means from scratch",
    "section": "3.2 Calculate distance",
    "text": "3.2 Calculate distance\n\nmeans.shape, X.shape\n\n(torch.Size([6, 2]), torch.Size([1500, 2]))\n\n\n\nmeans[:, None].shape, X[None].shape\n\n(torch.Size([6, 1, 2]), torch.Size([1, 1500, 2]))\n\n\n\n(means[:, None] - X[None]).shape\n\ntorch.Size([6, 1500, 2])\n\n\n\nmm = means[:, None] - X[None]\n\n\nl2 = torch.einsum('ijk, ijk-&gt;ij', mm, mm)\n\n\nl2\n\ntensor([[ 734.640,  709.354,  706.383,  ...,  569.188, 1460.258, 1255.919],\n        [ 297.342,  241.198,  183.035,  ...,   60.147,  350.148,  249.417],\n        [ 684.036,  643.628,  618.255,  ...,  380.736, 1172.179, 1018.224],\n        [1281.019, 1277.346, 1310.853,  ..., 1213.889, 2434.660, 2157.942],\n        [ 494.725,  412.703,  316.399,  ...,   17.422,  144.967,  130.433],\n        [ 232.653,  253.557,  305.201,  ...,  793.216, 1409.568, 1052.514]])\n\n\n\nl2.shape\n\ntorch.Size([6, 1500])\n\n\n\n(mm * mm).sum(2)\n\ntensor([[ 734.640,  709.354,  706.383,  ...,  569.188, 1460.258, 1255.919],\n        [ 297.342,  241.198,  183.035,  ...,   60.147,  350.148,  249.417],\n        [ 684.036,  643.628,  618.255,  ...,  380.736, 1172.179, 1018.224],\n        [1281.019, 1277.346, 1310.853,  ..., 1213.889, 2434.660, 2157.942],\n        [ 494.725,  412.703,  316.399,  ...,   17.422,  144.967,  130.433],\n        [ 232.653,  253.557,  305.201,  ...,  793.216, 1409.568, 1052.514]])\n\n\n\n(mm * mm).sum(2).shape\n\ntorch.Size([6, 1500])"
  },
  {
    "objectID": "posts/2023-04-26-k-means/index.html#select-nearest-group",
    "href": "posts/2023-04-26-k-means/index.html#select-nearest-group",
    "title": "K-means from scratch",
    "section": "3.3 Select nearest group",
    "text": "3.3 Select nearest group\n\ngroup = torch.argmin(l2, dim=0)\n\n\ngroup.shape\n\ntorch.Size([1500])"
  },
  {
    "objectID": "posts/2023-04-26-k-means/index.html#update-mean",
    "href": "posts/2023-04-26-k-means/index.html#update-mean",
    "title": "K-means from scratch",
    "section": "3.4 Update mean",
    "text": "3.4 Update mean\n\nX[group == 0].shape\n\ntorch.Size([47, 2])\n\n\n\ntorch.mean(X, 0)\n\ntensor([2.815, 6.901])\n\n\n\nfor i in range(k):\n    means[i] = torch.mean(X[group == i], 0)\n\n\nmeans\n\ntensor([[ 15.741, -10.534],\n        [  0.595,  16.672],\n        [ 18.710,  -2.103],\n        [ 22.234, -19.903],\n        [  2.595,  25.472],\n        [-11.656,   2.780]])\n\n\n\nplot_data(means, data, 250)"
  },
  {
    "objectID": "posts/2023-04-26-k-means/index.html#write-update-loop",
    "href": "posts/2023-04-26-k-means/index.html#write-update-loop",
    "title": "K-means from scratch",
    "section": "3.5 Write update loop",
    "text": "3.5 Write update loop\n\ndef update(means, X, n):\n    for t in range(n):\n        mm = means[:, None] - X[None]\n        l2 = torch.einsum('ijk, ijk-&gt;ij', mm, mm)\n        group = torch.argmin(l2, dim=0)\n        for i in range(k):\n            means[i] = torch.mean(X[group == i], 0)\n\n\nupdate(means, X, 10)\n\n\nplot_data(means, data, 250)"
  },
  {
    "objectID": "posts/2023-04-26-k-means/index.html#write-k-means-function",
    "href": "posts/2023-04-26-k-means/index.html#write-k-means-function",
    "title": "K-means from scratch",
    "section": "3.6 Write k-means function",
    "text": "3.6 Write k-means function\n\ndef kmeans(X, k, n):\n    # init means\n    perm = torch.randperm(X.size(0))\n    idx = perm[:k]\n    means = X[idx].clone()\n\n    for t in range(n):\n        mm = means[:, None] - X[None]\n        l2 = torch.einsum('ijk, ijk-&gt;ij', mm, mm)\n        group = torch.argmin(l2, dim=0)\n        for i in range(k):\n            means[i] = torch.mean(X[group == i], 0)\n    \n    return means\n\n\nmeans = kmeans(X, 6, 10)\n\n\nplot_data(means, data, 250)"
  },
  {
    "objectID": "posts/2023-05-01-learner-python/index.html",
    "href": "posts/2023-05-01-learner-python/index.html",
    "title": "Python basis related to fastai learner",
    "section": "",
    "text": "I have been studying fastai course part2.\nIn lesson 15 and lesson 16 Jeremy introduced Learner, a class that include model, dataloaders, loss function, optimizer.\nJeremy used some advanced python features that I canâ€™t understand well, here is the experiment that I used to help me understand those python features."
  },
  {
    "objectID": "posts/2023-05-01-learner-python/index.html#raise-error-in-with-statement",
    "href": "posts/2023-05-01-learner-python/index.html#raise-error-in-with-statement",
    "title": "Python basis related to fastai learner",
    "section": "4.1 Raise error in with statement?",
    "text": "4.1 Raise error in with statement?\n\nwith test_func():\n    print(\"In with\")\n    a = 1 / 0\n    print(\"In with 2\")\n\nBefore try\nExec try, before yield\nIn with\nexcept: Divided by zero\nExec finally"
  },
  {
    "objectID": "posts/2023-05-01-learner-python/index.html#raise-error-before-yield",
    "href": "posts/2023-05-01-learner-python/index.html#raise-error-before-yield",
    "title": "Python basis related to fastai learner",
    "section": "4.2 Raise error before yield?",
    "text": "4.2 Raise error before yield?\n\n@contextmanager\ndef test_func(*args, **kargs):\n    print(\"Before try\")\n    try:\n        print(\"Exec try, before yield\")\n        a = 1 / 0\n        yield\n        print(\"Exec try, after yield\")\n    except ZeroDivisionError:\n        print(\"except: Divided by zero\")\n    finally:\n        print(\"Exec finally\")\n\n\nwith test_func():\n    print(\"In with 1\")\n    print(\"In with 2\")\n\nBefore try\nExec try, before yield\nexcept: Divided by zero\nExec finally\n\n\nRuntimeError: generator didn't yield\n\n\n\n\n\n\n\n\nTip\n\n\n\nSo contextmanager canâ€™t handle error before yield, as Jeremy have tested in the class."
  },
  {
    "objectID": "posts/2023-05-01-learner-python/index.html#raise-error-after-yield",
    "href": "posts/2023-05-01-learner-python/index.html#raise-error-after-yield",
    "title": "Python basis related to fastai learner",
    "section": "4.3 Raise error after yield",
    "text": "4.3 Raise error after yield\n\n@contextmanager\ndef test_func(*args, **kargs):\n    print(\"Before try\")\n    try:\n        print(\"Exec try, before yield\")\n        yield\n        print(\"Exec try, after yield\")\n        a = 1 / 0\n    except ZeroDivisionError:\n        print(\"except: Divided by zero\")\n    finally:\n        print(\"Exec finally\")\n\n\nwith test_func():\n    print(\"In with 1\")\n    print(\"In with 2\")\n\nBefore try\nExec try, before yield\nIn with 1\nIn with 2\nExec try, after yield\nexcept: Divided by zero\nExec finally"
  },
  {
    "objectID": "posts/2023-05-01-learner-python/index.html#yield-value",
    "href": "posts/2023-05-01-learner-python/index.html#yield-value",
    "title": "Python basis related to fastai learner",
    "section": "4.4 yield value",
    "text": "4.4 yield value\n\n@contextmanager\ndef test_func(*args, **kargs):\n    print(\"Before try\")\n    try:\n        print(\"Exec try, before yield\")\n        yield range(3)\n        print(\"Exec try, after yield\")\n    except ZeroDivisionError:\n        print(\"except: Divided by zero\")\n    finally:\n        print(\"Exec finally\")\n\n\nwith test_func() as f:\n    print(\"In with 1\")\n    for i in f:\n        print(i)\n    print(\"In with 2\")\n\nBefore try\nExec try, before yield\nIn with 1\n0\n1\n2\nIn with 2\nExec try, after yield\nExec finally"
  },
  {
    "objectID": "posts/2022-11-09-python_getattr_getattribute/index.html",
    "href": "posts/2022-11-09-python_getattr_getattribute/index.html",
    "title": "Pythonä¸­çš„__getattr__å’Œ__getattribute__",
    "section": "",
    "text": "1 __getattr__\nå¦‚æœåœ¨ç±»ä¸­å®ç°äº†_getattr__æ–¹æ³•ï¼Œé‚£ä¹ˆå½“ä½¿ç”¨å¯¹è±¡.å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœå±æ€§ä¸åœ¨å¯¹è±¡é‡Œï¼Œåˆ™ä¼šè°ƒç”¨__getattr__æ–¹æ³•ã€‚\n\nclass Point():\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\n\np = Point(3, 4)\nprint(p.x, p.y)\nprint(p.z)\n\n3 4\n\n\nAttributeError: 'Point' object has no attribute 'z'\n\n\nå› ä¸ºPointæ²¡æœ‰zè¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚\nä¸‹é¢è¿™ä¸ªç±»å®ç°äº†__getattr__æ–¹æ³•ï¼Œçœ‹çœ‹ä¼šæ€ä¹ˆæ ·\n\nclass Point():\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n    \n    def __getattr__(self, name):\n        print('exec __getattr__ ğŸ˜€')\n        print(f'name: {name}')\n        return 42\n\n\np = Point(3, 4)\np.z\n\nexec __getattr__ ğŸ˜€\nname: z\n\n\n42\n\n\n\n\n\n\n\n\nTip\n\n\n\n__getattr__æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œselfä¸ç”¨è¯´ï¼Œnameå°±æ˜¯å±æ€§åç§°ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­å°±æ˜¯z\n\n\n\n\n2 __getattribute__\nå¦‚æœåœ¨ç±»ä¸­å®ç°äº†__getattribute__æ–¹æ³•ï¼Œé‚£ä¹ˆå½“ä½¿ç”¨å¯¹è±¡.å±æ€§çš„æ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨__getattr__æ–¹æ³•ã€‚\n\n\n\n\n\n\nTip\n\n\n\næ³¨æ„_getattr__æ˜¯å½“å±æ€§ä¸åœ¨å¯¹è±¡é‡Œçš„æ—¶å€™åœ¨è°ƒç”¨\n\n\n\nclass Point():\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n    \n    def __getattribute__(self, name):\n        print('exec __getattr__ ğŸ˜€')\n        print(f'name: {name}')\n        return 42\n\n\np = Point(3, 4)\np.x, p.y, p.z\n\nexec __getattr__ ğŸ˜€\nname: x\nexec __getattr__ ğŸ˜€\nname: y\nexec __getattr__ ğŸ˜€\nname: z\n\n\n(42, 42, 42)\n\n\np.x, p.yå’Œp.zéƒ½è°ƒç”¨äº†__getattribute__æ–¹æ³•"
  },
  {
    "objectID": "posts/2024-03-02-snakemake-workflow/index.html",
    "href": "posts/2024-03-02-snakemake-workflow/index.html",
    "title": "ä½¿ç”¨Githubçš„Snakemakeæµç¨‹",
    "section": "",
    "text": "æ¦‚è¿°\nGitHubæœ‰ä¸€ä¸ªsnakemakeæµç¨‹çš„åˆ†ç±»ï¼Œé‡Œé¢æœ‰å¾ˆå¤šç”Ÿä¿¡åˆ†ææµç¨‹ï¼Œrna-seq-star-deseq2ï¼Œdna-seq-gatk-variant-callingã€‚\næˆ‘æµ‹è¯•äº†rna-seq-star-deseq2è¿™ä¸ªæµç¨‹ã€‚\næ¯ä¸ªæµç¨‹éƒ½æœ‰ä½¿ç”¨è¯´æ˜ï¼Œå¦‚æœéƒ½çœ‹è¯´æ˜å¯ä»¥è·‘é€šï¼Œé‚£å°±å¥½äº†ğŸ¥¹\nä¸‹é¢å‚è€ƒrna-seq-star-deseq2çš„è¯´æ˜ï¼Œä¸€æ­¥ä¸€æ­¥åš.\n\n\nStep 1 å®‰è£…snamakeå’Œsnakedeploy\nä½¿ç”¨mambaå®‰è£…snakemeå’Œsnakedeployï¼Œå¦‚æœæ²¡æœ‰mambaï¼Œè‡ªè¡Œæœç´¢å®‰è£…å§.\n$ mamba create -c conda-forge -c bioconda --name snakemake snakemake snakedeploy\n\n$ conda activate snakemake\n\n\nStep 2 æµç¨‹éƒ¨ç½²\n$ mkdir proj_240302_test_snakemake\n\n$ cd proj_240302_test_snakemake\n\n$ snakedeploy deploy-workflow https://github.com/snakemake-workflows/rna-seq-star-deseq2 . --tag v2.1.0\nè¿è¡Œåçš„æ–‡ä»¶ç»“æ„ï¼š\n$ tree\n.\nâ”œâ”€â”€ config\nâ”‚Â Â  â”œâ”€â”€ README.md\nâ”‚Â Â  â”œâ”€â”€ config.yaml\nâ”‚Â Â  â”œâ”€â”€ samples.tsv\nâ”‚Â Â  â””â”€â”€ units.tsv\nâ””â”€â”€ workflow\n    â””â”€â”€ Snakefile\nå…¶å®å°±ä¸‹äº†configå’Œworkflowä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢åˆ†åˆ«æ˜¯é…ç½®æ–‡ä»¶å’Œæµç¨‹ã€‚workflowé‡Œé¢åªæœ‰ä¸€ä¸ªSnakefileï¼ŒSnakefileé‡ŒæŠŠgithubä¸Š rna-seq-star-deseq2çš„æµç¨‹ä½œä¸ºæ¨¡å—å¯¼å…¥äº†ã€‚\n\n\nStep 3 é…ç½®æµç¨‹\næµç¨‹é…ç½®æ˜¯æœ€éº»çƒ¦çš„ï¼Œæˆ‘ä¸‹è½½äº†ä»“åº“è‡ªå¸¦çš„æµ‹è¯•æ•°æ®ã€‚\næµ‹è¯•æ•°æ®åœ¨.testæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œç»“æ„å¦‚ä¸‹ï¼Œåº”è¯¥å¾ˆæ¸…æ¥šäº†ï¼Œconfig_basicå°±æ˜¯ç®€å•ç‰ˆçš„é…ç½®æ–‡ä»¶ï¼Œconfig_complexæ–‡ä»¶å¤¹æ˜¯å¤æ‚ç‰ˆçš„é…ç½®æ–‡ä»¶ï¼Œngs-test-dataå°±æ˜¯åŸå§‹æ•°æ®äº†ã€‚\n$ tree .test\n.\nâ”œâ”€â”€ config_basic\nâ”‚Â Â  â”œâ”€â”€ config.yaml\nâ”‚Â Â  â”œâ”€â”€ samples.tsv\nâ”‚Â Â  â””â”€â”€ units.tsv\nâ”œâ”€â”€ config_complex\nâ”‚Â Â  â”œâ”€â”€ config.yaml\nâ”‚Â Â  â”œâ”€â”€ samples.tsv\nâ”‚Â Â  â””â”€â”€ units.tsv\nâ””â”€â”€ ngs-test-data\n    â””â”€â”€ reads\n        â”œâ”€â”€ a.chr21.1.fq\n        â”œâ”€â”€ a.chr21.2.fq\n        â”œâ”€â”€ a.scerevisiae.1.fq\n        â”œâ”€â”€ a.scerevisiae.2.fq\n        â”œâ”€â”€ b.chr21.1.fq\n        â”œâ”€â”€ b.chr21.2.fq\n        â”œâ”€â”€ b.scerevisiae.1.fq\n        â”œâ”€â”€ b.scerevisiae.2.fq\n        â”œâ”€â”€ c.scerevisiae.1.fq\n        â””â”€â”€ c.scerevisiae.2.fq\n\n5 directories, 16 files\nåˆ æ‰Step 2 æµç¨‹éƒ¨ç½²ä¸‹è½½çš„configæ–‡ä»¶ï¼ŒæŠŠ.test/config_basicä¸­çš„é…ç½®æ–‡ä»¶éƒ½æ‹·è´proj_240302_test_snakemake/configæ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åæŠŠ.test/ngs-test-dataæ–‡ä»¶å¤¹æ‹·è´åˆ°proj_240302_test_snakemakeæ–‡ä»¶å¤¹ã€‚\nä¿®æ”¹proj_240302_test_snakemake/config/config.yamlæ–‡ä»¶çš„sampleså’Œunité…ç½®è·¯å¾„ï¼š\nsamples: config/samples.tsv\nunits: config/units.tsv\né…ç½®æœ‰å¾ˆå¤šç»†èŠ‚ï¼Œæ¯”å¦‚åŸå§‹æ•°æ®çš„æ¥å¤´åºåˆ—ï¼Œå·®å¼‚è¡¨è¾¾åˆ†ç»„ä¿¡æ¯ï¼Œæ˜¯å¦æ˜¯é“¾ç‰¹å¼‚æ–‡åº“ç­‰ç­‰ã€‚\nè¯·å‚è€ƒé…ç½®æ–‡ä»¶çš„è¯´æ˜å’Œæµç¨‹è‡ªå¸¦çš„é…ç½®è¯´æ˜ã€‚å½“ç„¶.testæ–‡ä»¶å¤¹ä¸­çš„é…ç½®æ–‡ä»¶æ ¼å¼å€¼å¾—å‚è€ƒã€‚\n\n\nStep 4 è¿è¡Œæµç¨‹\nç»ˆäºå¯ä»¥è¿è¡Œæµç¨‹äº†ï¼š\n$ snakemake --cores all --use-conda\næœç„¶æŠ¥é”™äº†ğŸ˜­ï¼š\nNotImplementedError: Remote providers have been replaced by Snakemake storage plugins. Please use the corresponding storage plugin instead (snakemake-storage-plugin-*).\nGoogleä¸€ä¸‹ï¼Œrna-seq-star-deseq2é‡Œæœ‰ä¸€ä¸ªissueså°±æ˜¯è¿™ä¸ªé—®é¢˜ã€‚\nåŸå› æ˜¯snakemakeæµç¨‹æœ€è¿‘ï¼ˆ2024å¹´3æœˆ3æ—¥ï¼‰æ—¥æ›´æ–°åˆ°ç‰ˆæœ¬8äº†ï¼Œç‰ˆæœ¬8å¼•å…¥äº†pluginåŠŸèƒ½ï¼Œrna-seq-star-deseq2æµç¨‹è¿˜ä¸æ”¯æŒã€‚issuesé‡Œä¹Ÿç»™å‡ºäº†è§£å†³åŠæ³•ï¼Œåˆ é™¤å·²ç»è£…å¥½çš„snakemakeçš„condaç¯å¢ƒï¼Œç„¶åå®‰è£…7.32.4ç‰ˆæœ¬çš„snakemakeã€‚\n$ mamba deactivate\n\n$ mamba remove -n snakemake --all\n\n$ mamba create -c conda-forge -c bioconda -n snakemake7 snakemake=7.32.4 \n\n$ mamba activate snakemake7\né‡æ–°é…ç½®å¥½ç¯å¢ƒåï¼Œå†æ¬¡è¿è¡Œæµç¨‹ï¼š\n$ snakemake --cores all --use-conda\næµç¨‹ä¼šå…ˆä¸‹è½½ä¾èµ–çš„ç¯å¢ƒï¼Œå‚è€ƒåŸºå› ç»„ï¼ˆæˆ‘ç”¨äº†å¤§çº¦20åˆ†é’Ÿï¼‰ï¼Œç„¶åè¿è¡Œé‡Œé¢å®šä¹‰çš„æ­¥éª¤ã€‚\nç»“æœæ–‡ä»¶åœ¨resultsæ–‡ä»¶å¤¹ä¸‹ï¼š\n$ ll -rth results/\ntotal 120\ndrwxr-xr-x  14 chenmin  staff   448B Mar  3 00:17 trimmed\ndrwxr-xr-x   6 chenmin  staff   192B Mar  3 00:20 star\ndrwxr-xr-x   4 chenmin  staff   128B Mar  3 00:21 qc\ndrwxr-xr-x   4 chenmin  staff   128B Mar  3 00:22 counts\n-rw-r--r--@  1 chenmin  staff    59K Mar  3 00:22 pca.condition.svg\ndrwxr-xr-x   5 chenmin  staff   160B Mar  3 00:22 deseq2\ndrwxr-xr-x   5 chenmin  staff   160B Mar  3 00:23 diffexp\n\n\nStep 5 ç”ŸæˆæŠ¥å‘Š\n$ snakemake --report report.zip\nè§£å‹report.zipï¼Œæ‰“å¼€report.htmlï¼Œç½‘é¡µå·¦ä¾§æœ‰4ä¸ªé€‰é¡¹ï¼ŒWorkflowæ˜¯æµç¨‹è¿è¡Œçš„æ­¥éª¤ï¼Œè¯´æ˜ï¼›Statisticsç»Ÿè®¡äº†æ¯ä¸€æ­¥è¿è¡Œçš„æ—¶é—´ï¼›Aboutæ˜¯æµç¨‹ç”¨åˆ°è½¯ä»¶çš„ä½¿ç”¨æƒé™è¯´æ˜ï¼›Resultsæ˜¯æœ€å…³å¿ƒçš„ç»“æœäº†ã€‚\næµ‹è¯•å®ŒæˆğŸ‰"
  },
  {
    "objectID": "posts/2022-11-08-python_enter_exit/index.html",
    "href": "posts/2022-11-08-python_enter_exit/index.html",
    "title": "Pythonä¸­çš„__enter__å’Œ__exit__",
    "section": "",
    "text": "1 __enter__å’Œ__exit__æ˜¯ä»€ä¹ˆ\nå½“åœ¨ç±»ä¸­å®ç°__enter__å’Œ__exit__æ–¹æ³•çš„ä½¿ç”¨ï¼Œè¿™ä¸ªç±»å°±å¯ä»¥ç”¨withè°ƒç”¨äº†ï¼Œè°ƒç”¨withçš„æ—¶å€™ï¼Œè¿”å›__enter__çš„ç»“æœï¼Œé€€å‡ºwithçš„æ—¶å€™ï¼Œæ‰§è¡Œ__exit__çš„ä»£ç ã€‚\nå¹³æ—¶ç”¨withæœ€å¤šçš„å¯èƒ½æ˜¯æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œwithè¿”å›æ–‡ä»¶çš„å¥æŸ„ï¼ˆfile handleï¼‰ï¼Œé€€å‡ºwithçš„æ—¶å€™å…³é—­æ–‡ä»¶ã€‚\nå¦‚ä¸‹ä»£ç ï¼š\n\n# å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶\n! echo -e 'line1\\nline2\\nline3' &gt; sample.txt\n! cat sample.txt\n\nline1\nline2\nline3\n\n\n\n# ä½¿ç”¨pythonè¯»å–æ–‡ä»¶\nwith open('sample.txt', 'r') as f:\n    for line in f:\n        print(line, end='')        \n\nline1\nline2\nline3\n\n\n\n# æŸ¥çœ‹fæ˜¯å¦å…³é—­äº†ï¼Œè¿”å›Trueï¼Œè¡¨ç¤ºfå…³é—­äº†\nf.closed\n\nTrue\n\n\nå¦‚æœä¸ç”¨withï¼Œéœ€è¦æ‰‹åŠ¨å…³é—­æ–‡ä»¶ã€‚\n\nf = open('sample.txt', 'r')\n\n\n# fè¿˜æ²¡æœ‰å…³é—­\nf.closed\n\nFalse\n\n\n\n# ä½¿ç”¨close()æ–¹æ³•å…³é—­æ–‡ä»¶åï¼Œæ–‡ä»¶å°±å…³é—­äº†\nf.close()\nf.closed\n\nTrue\n\n\n\n\n2 è‡ªå·²å†™ä¸€ä¸ªå¤„ç†æ–‡ä»¶çš„ç±»\n\nclass MyOpen():\n    def __init__(self, file, mode):\n        self.file = file\n        self.mode = mode\n    \n    def __enter__(self):\n        self.f = open(self.file, self.mode)\n        return self.f\n    \n    def __exit__(self, exc_type, exc_val, exc_tb):\n        self.f.close()\n\n\nwith MyOpen('sample.txt', 'r') as f:\n    for line in f:\n        print(line, end='')        \n\nline1\nline2\nline3\n\n\n\nf.closed\n\nTrue\n\n\n\n\n\n\n\n\nTip\n\n\n\næ³¨æ„ä¸Šé¢çš„MyOpenç±»ä¸­çš„__exit__æ–¹æ³•æœ‰4ä¸ªå‚æ•°ï¼Œselfä¸å¿…è¯´ï¼Œåé¢ä¸‰ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\n\n\n\n3 __exit__çš„å‚æ•°\n\nclass SafeDivide():\n    def __init__(self, a, b):\n        self.a = a\n        self.b = b\n    \n    def __enter__(self):\n        print('exec __enter__')\n        print(f'{self.a} / {self.b} = ', end='')\n        return self\n    \n    def divide(self):\n        return self.a / self.b\n    \n    def __exit__(self, exc_type, exc_val, exc_tb):\n        print('\\n------------')\n        print('exec __exit__')\n        print(f\"exec_type: {exc_type}\")\n        print(f\"exc_val: {exc_val}\")\n        print(f\"exc_tb: {exc_tb}\")\n\n\nwith SafeDivide(1, 2) as d:\n    print(d.divide())\n    print('å•¦å•¦å•¦')\n\nexec __enter__\n1 / 2 = 0.5\nå•¦å•¦å•¦\n\n------------\nexec __exit__\nexec_type: None\nexc_val: None\nexc_tb: None\n\n\nå¦‚æœæ‰§è¡Œæ²¡æœ‰é—®é¢˜ï¼Œexc_type, exc_val, exc_tbéƒ½æ˜¯None\n\nwith SafeDivide(1, 0) as d:\n    print(d.divide())\n\nexec __enter__\n1 / 0 = \n------------\nexec __exit__\nexec_type: &lt;class 'ZeroDivisionError'&gt;\nexc_val: division by zero\nexc_tb: &lt;traceback object&gt;\n\n\nZeroDivisionError: division by zero\n\n\nå¦‚æœæ‰§è¡Œå¯¹è±¡çš„æ–¹æ³•å‡ºç°é—®é¢˜ï¼Œå°±ä¼šç›´æ¥æ‰§è¡Œ__exit__æ–¹æ³•ï¼Œexc_type, exc_val, exc_tbåŒ…å«çš„å°±æ˜¯é”™è¯¯ç±»å‹ï¼Œé”™è¯¯å€¼ï¼Œé”™è¯¯çš„å›æº¯ä¿¡æ¯ã€‚\n\n\n\n\n\n\nNote\n\n\n\nå‡ºé”™åä¸ä¼šæ‰§è¡Œåé¢çš„è¯­å¥ï¼Œæ¯”å¦‚è¿™é‡Œçš„print('å•¦å•¦å•¦')ï¼Œè€Œæ˜¯ç›´æ¥æ‰§è¡Œ__exit__äº†"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Blog",
    "section": "",
    "text": "ä½¿ç”¨Githubçš„Snakemakeæµç¨‹\n\n\n\n\n\n\nBioinformatics\n\n\n\n\n\n\n\n\n\nMar 2, 2024\n\n\nmetseq\n\n\n\n\n\n\n\n\n\n\n\n\nPython basis related to fastai learner\n\n\n\n\n\n\nPython\n\n\nML\n\n\n\n\n\n\n\n\n\nMay 1, 2023\n\n\nmetseq\n\n\n\n\n\n\n\n\n\n\n\n\nK-means from scratch\n\n\n\n\n\n\nPython\n\n\nML\n\n\n\n\n\n\n\n\n\nApr 25, 2023\n\n\nmetseq\n\n\n\n\n\n\n\n\n\n\n\n\nPythonä¸­çš„__getattr__å’Œ__getattribute__\n\n\n\n\n\n\nPython\n\n\n\n\n\n\n\n\n\nNov 9, 2022\n\n\nmetseq\n\n\n\n\n\n\n\n\n\n\n\n\nPythonä¸­çš„__enter__å’Œ__exit__\n\n\n\n\n\n\nPython\n\n\n\n\n\n\n\n\n\nNov 8, 2022\n\n\nmetseq\n\n\n\n\n\n\n\n\n\n\n\n\nPythonä¸­çš„å‡ ä¸ªé­”æ³•æ–¹æ³•\n\n\n\n\n\n\nPython\n\n\n\n\n\n\n\n\n\nOct 31, 2022\n\n\nmetseq\n\n\n\n\n\n\n\n\n\n\n\n\nåšå®¢åŸå› \n\n\n\n\n\n\nessay\n\n\n\n\n\n\n\n\n\nJul 19, 2018\n\n\nmetseq\n\n\n\n\n\n\nNo matching items"
  }
]